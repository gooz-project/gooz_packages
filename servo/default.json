{
    "name": "servo",
    "codes": [
        {
            "filename": "main.py",
            "code": "from machine import Pin,PWMpkglineflagimport utimepkglineflagfrom wifuxlogger import WifuxLogger as LOGpkglineflagfrom engine.engine_template import EngineTemplatepkglineflagimport ujsonpkglineflagfrom dev.pin.core import CommonCommands as PinCommandspkglineflagpkglineflagconfig_path=\"//app/servo/servoconfig.json\"pkglineflagpkglineflagpkglineflagclass Servo_MotorUsage():pkglineflag    pkglineflag    @staticmethodpkglineflag    def error_undefined_pin(pin_name):pkglineflag        return LOG.error(f'There is no Servo pin named {pin_name}!')pkglineflag    pkglineflag    @staticmethodpkglineflag    def var_usage():pkglineflag        return LOG.info(' -> servo var --name [PIN NAME] -pin [PWM_PIN] ')pkglineflag    pkglineflag    @staticmethodpkglineflag    def degree_usage():pkglineflag        return LOG.info(' -> servo write [PIN NAME] [DEGREE]')+'\\n'+LOG.info('[DEGREE] have to be between 0 and 180')pkglineflag    pkglineflag    @staticmethodpkglineflag    def delete_usage():pkglineflag        return LOG.info(' -> servo delete [PIN NAME]')+'\\n'+LOG.info('servo delete command deletes registered Servo pins by pin_name')pkglineflag    pkglineflag    @staticmethodpkglineflag    def show_usage():pkglineflag        return LOG.info(' -> servo show')+'\\n'+LOG.info('servo show command simply prints registered Servo pins')pkglineflag    pkglineflag    @staticmethodpkglineflag    def update_usage():pkglineflag        return LOG.info(' -> servo update [PIN NAME] --[PARAMETER_NAME] [NEW_PARAMETER]')+'\\n'+LOG.info('updates registered Servo named [PIN NAME]')pkglineflagpkglineflagpkglineflagdef help(cmds):   pkglineflag    message = \"\"pkglineflag    command_list = ['var','show','delete','update','degree']pkglineflag    if not len(cmds) > 2:pkglineflag        for command in command_list:pkglineflag            message += commandpkglineflag            message += '\\n'pkglineflag        return 'Commands:\\n'+message+LOG.info('For more information about commands -> servo help [COMMAND]')pkglineflag    try:pkglineflag        return eval('Servo_MotorUsage.{}_usage()'.format(cmds[2]))pkglineflag    except:pkglineflag        return LOG.error('There is no help for \"{}\"!'.format(cmds[2]))pkglineflagpkglineflagpkglineflagdef var(cmds):pkglineflag    blueprint={\"pinType\":\"servo\",\"--name\":\"\",\"--pin\":\"\"}pkglineflag    missing_arg = Falsepkglineflag    temp = EngineTemplate.parameter_parser(cmds,blueprint)pkglineflag    for key in temp:pkglineflag        if temp[key] == \"\":pkglineflag            missing_arg = Truepkglineflag            return LOG.error('Error while registering Servo pin!')+'\\n'+LOG.error('Missing Argument(s)!')pkglineflag    pkglineflag    PinCommands(cmds, path=config_path,pin_type=\"servo\").register(blueprint)pkglineflag    return LOG.debug('The new Servo pin named \"{}\" successfully saved:\\n{}'.format(blueprint[\"--name\"],blueprint))pkglineflagpkglineflagpkglineflagdef delete(cmds):pkglineflag    return PinCommands(cmds, path=config_path, pin_type=\"servo\", pin_name=cmds[2]).delete()pkglineflag        pkglineflag        pkglineflagdef update(cmds):pkglineflag    return PinCommands(cmds,config_path,pin_type=\"servo\",pin_name=cmds[2]).update()pkglineflagpkglineflagpkglineflagdef show(cmds):pkglineflag    return PinCommands(cmds,path=config_path,pin_type=\"servo\").show()pkglineflagpkglineflagpkglineflagdef run(cmds):pkglineflag    if not len(cmds)>1:pkglineflag        return LOG.error(\"Please enter a command!\")+'\\n'+LOG.info(\"You can use 'servo help' for available commands!\")pkglineflag    if cmds[1][0] == '_':pkglineflag        return \"ERROR\"pkglineflag    try:pkglineflag        return eval(\"{}({})\".format(cmds[1],EngineTemplate.exec_formatter_api(cmds)))pkglineflag    except NameError:pkglineflag        return LOG.error(\"There is a problem while running Servo command\")+'\\n'+LOG.error(f'Is the \"{cmds[1]}\" a Servo command?')+'\\n'+LOG.info(\"You can use 'servo help' for available commands!\")pkglineflag    except Exception as ex:pkglineflag        return LOG.error(\"There is a problem while running Servo command!\")+'\\n'+LOG.error(ex)+'\\n'+LOG.error(\"You can use 'servo help' for available commands!\")pkglineflag    pkglineflag    pkglineflagdef degree(cmds):pkglineflag    blueprint = {}pkglineflag    blueprint = EngineTemplate.parameter_parser(cmds,blueprint)pkglineflag    pin = PinCommands(cmds,path=config_path,pin_type=\"servo\").get_pin(cmds[0],cmds[2])pkglineflag    pkglineflag    if cmds[2] == pin[\"--name\"] and pin[\"pinType\"] == \"servo\":pkglineflag        try:pkglineflag            servo_pin = PWM(Pin(int(pin[\"--pin\"])), freq = 50)pkglineflag        except Exception as ex:pkglineflag            return LOG.error(ex)pkglineflag        try:pkglineflag            servo_pin.duty(int((int(cmds[3])*5/9)+20))pkglineflag        except Exception as ex:pkglineflag            return LOG.error(ex)pkglineflag        del servo_pinpkglineflag        return LOG.info(\"The servo is succesfully executed.\")pkglineflag "
        },
        {
            "filename": "servoconfig.json",
            "code": "[]"
        }
    ]
}